# Описание проекта
Данный API позволяет:

Регистрацию и вход библиотекарей (пользователей) с JWT-аутентификацией.
Полное управление книгами (создание, чтение, обновление, удаление).
Управление читателями (создание, чтение, обновление, удаление).
Выдачу книг читателям с бизнес-логикой по доступности и лимиту.
Возврат книг.
Получение списка всех книг и книг, взятых конкретным читателем.


# Установка и пользование

Installation

git clone https://github.com/Ilmir112/LibraryBooks.git
cd LibraryBooks

Создайте виртуальное окружение и активируйте его:
 
python -m venv env
source env/bin/activate  # Linux/Mac
или
env\Scripts\activate  # Windows

pip install -r requirements.txt

# Регистрация пользователя (библиотекаря):
POST /auth/register
Регистрацию и вход библиотекарей (пользователей) с использованием JWT-аутентификации:
-Безопасность доступа JWT (JSON Web Token)
-Удобство использования
-Гибкость и расширяемость
-Масштабируемость и статeless-архитектура
-Стандартизация

Перед началом работ необходимо произвести регистрацию пользователя(библиотекаря) по адресу
POST /auth/register
ввести email и password
{
  "email": "librarian@example.com",
  "password": "strongpassword"
}
пароль захэширован. 
после входа выдается токен JWT с доступом на 30минут

# Вход и получение токена:
POST /auth/login

 Формы запроса:
{
  "email": "librarian@example.com",
  "password": "strongpassword"
}
Ответ содержит access_token.

# Управление книгами:
POST /books/add_books
GET /books/find_one_book
PUT /books/update_books
DELETE /books/delete

# Получение всех книг:
GET /books/all_books

# Управление читателями:
POST /readers/add_reader
GET /readers/all_reader
GET /readers/find_one_reader
PUT /readers/update_readers
DELETE /readers/delete

# Выдача книги:
POST /borrowed_book/issue_book
{
  "book_id": 1,
  "reader_id": 2
}
Перед выдачей книг происходит проверка наличия читателя и книги по введенному id
При наличии корректного id читателя и книги идет проверка сколько книг невозращённых книг есть у читателя 
("return_date"==None), если меньше трех книга успешно выдается и фиксируется текущая дата выдачи количество книг 
с уникальным isbn уменьшается на 1. 
В обратном случае выдается исключение FindBookAndReaderException.
 

# Возврат книги:
POST /borrowed_book/returning_books
 
{
  "book_id": 1,
  "reader_id": 2
}
Перед возвращением книги идет проверка получал ли этот пользователь (проверка по id) конкретно эту книгу.
Только этого книга обратно принимается и ставится запись возврата. Запись выдачи не удаляется.

# Получение книг конкретного читателя:
GET /borrowed_book/all_borrowed_book

# Возвращает список всех книг по записи

Получение книг конкретного читателя:
GET /borrowed_book/all_borrowed_book_not_returned

Возвращает список всех книг по записи c проверкой по таблице return_date is None по reader_id

# аутентификации
режим аутентификации использует JWT-токены для подтверждения 
личности пользователя. Используется библиотека passlib с классом CryptContext для хэширования паролей.Процесс включает 
проверку введённого пароля с 
хэшированным паролем из базы данных. При успешной проверке создаётся JWT-токен с истечением срока через 30 минут, 
который возвращается пользователю для последующих запросов. Защищены токеном все endpoints

# Творческая часть: 
Так же в проект я бы добавил, отправку сообщение через фоновые задачи и кэширование либо электронную почту или 
в telegram через 10 дней после получения книги до момента возврата.

Для реализации использовал бы Celery и Redis. Библиотеку для создания телеграмм бота.
Для отправки сообщения пришлось бы создать функцию для отправки сообщений 
с шаблонными фразами и зарегистрировал бы ее в Celery. Возможно пришлось бы 
создать дополнительную колонку в borrowed_book для фиксации срока необходимого возврата.